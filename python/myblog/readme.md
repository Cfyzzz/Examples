# BlogAPIComments

 Пример API по работе с комментариями. 

## Описание API

**api/comment** Используйте для работы с комментариями блога
<hr>

`GET` **api/comment/article** Получить все статьи блога
<details><summary>Описание</summary>

| Код ответа  | Описание                    |
|:-----------:|-----------------------------|
|     200     | запрос выполнен успешно     |
|     400     | в блоге нет ни одной статьи |

Ответ в случае успешного выполнения запроса:
```json
{
    "articles": [
        {
            "model": "comments.article",
            "pk": 1,
            "fields": {
                "author": "автор поста"
            }
        },
        ...
    ],
    "message": "Ok"
}
```

Ответ в случае неудачи:
```json
{
    "message": "Нет ни одной статьи"    
}
```
</details>

<hr>

`POST` **api/comment/article** Отправить статью в блог
<details><summary>Описание</summary>

| Код ответа | Описание                                        |
|:----------:|-------------------------------------------------|
|    201     | запрос выполнен успешно                         |
|    400     | запрос не обработан, возникла какая-либо ошибка |

Запрос:
```json
{
    "author": "Author"
}
```

Ответ в случае успешного выполнения запроса:
```json
{
    "articles": [
        {
            "model": "comments.article",
            "pk": 1,
            "fields": {
                "author": "автор поста"
            }
        },
        ...
    ]
}
```
Ответ в случае неудачи:
```json
{
    "message": "Неправильный запрос"    
}
```
</details>

<hr>

`GET` **api/comment/article/{pk}** Получение всех комментариев к статье вплоть до 3 уровня вложенности
<details><summary>Описание</summary>

### Параметры:
- **pk** - ключ статьи

| Код ответа | Описание                                        |
|:----------:|-------------------------------------------------|
|    200     | запрос выполнен успешно                         |
|    400     | запрос не обработан, возникла какая-либо ошибка |

Ответ в случае успешного выполнения запроса:
```json
{
    "comments": [
        {
            "model": "comments.comment",
            "pk": 1,
            "fields": {
                "parent": 0,
                "article": 1,
                "text": "Очень замечатльеная статья",
                "user": null,
                "level": 1
            }
        },
        {
            "model": "comments.comment",
            "pk": 3,
            "fields": {
                "parent": 1,
                "article": 1,
                "text": "Спасибо, что вам понравилось",
                "user": 1,
                "level": 2
            }
        },
        ...
    ],
    "message": "Ok"
}
```
Ответ в случае неудачи:
```json
{
    "message": "Текст ошибки"    
}
```
</details>

<hr>

`GET` **api/comment/{pk}** Получение всех вложенных комментариев для комментария - 3 уровня
<details><summary>Описание</summary>

### Параметры:
- **pk** - ключ комментария

| Код ответа | Описание                                        |
|:----------:|-------------------------------------------------|
|    200     | запрос выполнен успешно                         |
|    400     | запрос не обработан, возникла какая-либо ошибка |

Ответ в случае успешного выполнения запроса:
```json
{
    "comments": [
        {
            "model": "comments.comment",
            "pk": 3,
            "fields": {
                "parent": 1,
                "article": 1,
                "text": "Спасибо, что вам понравилось",
                "user": 1,
                "level": 2
            }
        },
        ...
    ],
    "message": "Ok"
}
```
Ответ в случае неудачи:
```json
{
    "comments": [],
    "message": "Текст ошибки"    
}
```
</details>

<hr>

`POST` **api/comment/append/article** Добавление комментария к статье
<details><summary>Описание</summary>

| Код ответа | Описание                                        |
|:----------:|-------------------------------------------------|
|    201     | запрос выполнен успешно                         |
|    400     | запрос не обработан, возникла какая-либо ошибка |

Запрос:
```json
{
    "article": 3,
    "text": "Статья требует доработки!",
    "user": 1
}
```
Ответ в случае успешного выполнения запроса:
```json
{
    "id": 8,
    "message": "Ok"
}
```
Ответ в случае неудачи:
```json
{
    "message": "Текст ошибки"    
}
```
</details>

<hr>

`POST` **api/comment/append/comment** Добавление комментария в ответ на другой комментарий
<details><summary>Описание</summary>

| Код ответа | Описание                                        |
|:----------:|-------------------------------------------------|
|    201     | запрос выполнен успешно                         |
|    400     | запрос не обработан, возникла какая-либо ошибка |

Запрос:
```json
{
    "parent": 4,
    "text": "Пожалуйста :)",
    "user": 1
}
```
Ответ в случае успешного выполнения запроса:
```json
{
    "id": 9,
    "message": "Ok"
}
```
Ответ в случае неудачи:
```json
{
    "message": "Текст ошибки"    
}
```
</details>

## Получение дерева комментариев к статьям

**/tree/**

Пример так:
```
Article 's:
..Очень замечатльеная статья pk=1
....Спасибо, что вам понравилось pk=3
..Спасибо за статью pk=2
......Пожалуйста :) pk=4
........Наздоровье :) pk=6
........Пожалуйста :) pk=9
Article Pushkin's:
..Статья отпад! pk=5
Article Zayc's:
..Статья требует доработки! pk=7
..Статья требует доработки! pk=8
```
